<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" layout:decorator="shared/layout">

<head>
    <title>Yelp Business Management</title>
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.common-material.min.css}" />
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.material.min.css}" />
    <link rel="stylesheet" th:href="@{/kendoui/css/kendo.material.mobile.min.css}" />
</head>
<body>
    <!-- Content Wrapper. Contains page content -->
    <div layout:fragment="content" class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                Business Management
                <small>List</small>
            </h1>
            <ol class="breadcrumb">
                <li><a href="#"><i class="fa fa-dashboard"></i> Business</a></li>
                <li class="active">list</li>
            </ol>
        </section>

        <!-- Main content -->
        <section class="content">
            <!-- Main row -->
            <div class="row " id="item-list">
<!--                <div class="col-lg-12 col-xs-12 movie-item">-->
<!--                    <div class="col-lg-4 col-xs-4">-->
<!--                        <img class="movie-img" src="" alt="" />-->
<!--                    </div>-->
<!--                    <div class="col-lg-8 col-xs-8 name"> </div>-->
<!--                    <div class="col-lg-8 col-xs-8 foreign_name"> </div>-->
<!--                    <div class="col-lg-8 col-xs-8 release_date"></div>-->
<!--                    <div class="col-lg-8 col-xs-8 minutes"> </div>-->
<!--                    <div class="col-lg-8 col-xs-8 space_type"> </div>-->
<!--                </div>-->
            </div>
            <!-- /.row (main row) -->

        </section>
        <!-- /.content -->
    </div>
    <th:block layout:fragment="scriptsblock">
        <script>

            var apiUrl = "http://localhost:7000/api-business/client/movie/query";
            $(document).ready(function() {
                $.getJSON(apiUrl, {name : "", pageNo : 1, pageSize :30} ,function(data){
                    console.log(data);
                    $.each(data.data, function(i,item){
                        debugger;
                        console.log(item)
                        show(item);
                    });
                });
            });

            function show(item) {
                var imgUri = item.images;
                var movieHtml = '                <div class="col-lg-12 col-xs-12 movie-item">\n' +
                    '                    <div class="col-lg-4 col-xs-4">\n' +
                    '                        <a href="detail.html?movieId=' + item.id +'"><img class="movie-img" src="' +
                    imgUri  +' " alt="'+ item.name +'" /></a>\n' +
                    '                    </div>\n' +
                    '                    <div class="col-lg-8 col-xs-8 name"> ' + item.name + ' </div>\n' +
                    '                    <div class="col-lg-8 col-xs-8 foreign_name">' + item.foreign_name + ' </div>\n' +
                    '                    <div class="col-lg-8 col-xs-8 release_date">' + item.release_date + '</div>\n' +
                    '                    <div class="col-lg-8 col-xs-8 minutes"> ' + item.minutes + '</div>\n' +
                    '                    <div class="col-lg-8 col-xs-8 space_type">' + item.space_type + ' </div>\n' +
                    '                </div>';

                $("#item-list").append(movieHtml);
                
            }
            
        </script>
    </th:block>
</body>
</html>